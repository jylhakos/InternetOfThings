# CI/CD

In GCP, Continuous Integration and Continuous Delivery or Deployment (CI/CD), is a set of practices focused on automating the integration, testing, and deployment of code changes to improve software development efficiency and reliability. 

GCP provides various tools like Cloud Build, Artifact Registry, and Cloud Deploy to facilitate these processes. 

## Cloud Build and Cloud Deploy

To build a CI/CD pipeline in GCP, you'll use Google Cloud Build, a fully managed service that automates the build, test, and deployment process. 

The pipeline typically involves connecting a code repository (like GitHub or GitLab), triggering builds on code changes, building and testing application artifacts (like Docker images), and deploying them to environments like GKE, App Engine, or Cloud Run. 

To implement CI/CD with Cloud Build and Cloud Deploy on GCP, you'll need to configure Cloud Build to build and package your application, and then use Cloud Deploy to deploy the application to your target environment (e.g., GKE). 

Cloud Build handles the build process, while Cloud Deploy manages the deployment pipeline, including staging, validation, and rollback. 

### CI/CD step-by-step

1. Set up your CI/CD environment

GCP Account and Permissions: 

Ensure you have a GCP account with the necessary permissions to create and manage Cloud Build triggers, Cloud Source Repositories, Container Registry, and Cloud Deploy settings.

Source Code Repository: 

Store your application code in a Git repository (Cloud Source Repositories, GitHub, or Bitbucket).

Containerization: 

Containerize your application using Docker to make it easier to build, test, and deploy.

Container Registry: 

Store your container images in Container Registry.

GKE Cluster (Optional): 

If deploying to GKE, you'll need a GKE cluster.

2. Configure Cloud Build:

Create a build trigger:

Define a Cloud Build trigger that is activated when changes are pushed to your source code repository.

Define build configuration:

Create a cloudbuild.yaml file to specify the build steps (e.g., Docker build, push to Container Registry).

Include deployment steps:

Add a step in your cloudbuild.yaml to call Cloud Deploy to create a release and invoke your delivery pipeline.

3. Configure Cloud Deploy

Create a delivery pipeline:

Define a delivery pipeline in Cloud Deploy that specifies the targets where your application will be deployed (e.g., GKE clusters).

Define targets:

Each target represents a deployment environment, and you can configure it with specific settings (e.g., GKE cluster details).

Create a release:

Cloud Deploy will use the container image generated by Cloud Build to create a release.

4. Automate the CI/CD process

Integrate Cloud Build and Cloud Deploy:

Configure Cloud Build to automatically trigger the Cloud Deploy pipeline when a build is successful.

Use triggers:

Set up Cloud Build triggers to automatically start builds based on events (e.g., commits, pull requests). 

References

Step-by-Step instructions for creating the CI/CD pipeline

https://cloud.google.com/blog/products/devops-sre/devsecops-and-cicd-using-google-cloud-built-in-services

